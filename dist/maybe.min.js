(function(root,factory){if(typeof define==="function"&&define.amd){define([],factory)}else if(typeof exports==="object"){module.exports=factory()}else{root.maybe=factory()}})(this,function(){"use strict";var freeze=Object.freeze||function(object){return object};function Ctor(){}function facade(value){return value==null?maybe.nothing:value instanceof Ctor?value:maybe.just(value)}function maybe(value){return facade(value)}maybe.from=function(value){return facade(value)};maybe.string=function(value){if(typeof value!=="string"||value===""){return maybe.nothing}return maybe.just(value)};maybe.number=function(value){if(typeof value!=="number"){return maybe.nothing}return maybe.just(value)};maybe.object=function(value){if(typeof value!=="object"){return maybe.nothing}return maybe(value)};Ctor.prototype=freeze({filter:function(fn){return this.empty?this:fn(this.get())?this:maybe.nothing},map:function(fn){return this.empty?this:maybe(fn(this.get()))},forEach:function(fn){if(this.nonEmpty)fn(this.get());return this},orElse:function(orElse){return this.nonEmpty?this:maybe(this.getOrElse(orElse))},getOrElse:function(orElse){return this.nonEmpty?this.get():typeof orElse==="function"?orElse():orElse},getOrThrow:function(e){if(this.nonEmpty)return this.get();throw e||new Error("Trying to get value of Nothing")},toString:function(){return this.empty?"":String(this.get())}});maybe.just=function(value){var self=new Ctor;self.empty=false;self.nonEmpty=true;self.get=function(){return value};return freeze(self)};maybe.nothing=function(){var self=new Ctor;self.empty=true;self.nonEmpty=false;self.get=function(){self.getOrThrow()};return freeze(self)}();return maybe});
